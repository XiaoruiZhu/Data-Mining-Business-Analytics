---
title: "Introduction to the Data Cleaning"
output:
  html_document: 
    fig_caption: yes
    number_sections: yes
    theme: readable
    toc: yes
    code_folding: show
  html_notebook:
    toc: yes
  md_document:
    variant: markdown_github
  pdf_document: default
editor_options: 
  chunk_output_type: console
---

```{r setup, echo=FALSE, include=FALSE}
knitr::opts_chunk$set(eval = TRUE, warning=FALSE, message = FALSE)
```


## Data Cleaning (80% of the work)

[**Data preparation** accounts for about 80% of the work of data scientists](https://www.forbes.com/sites/gilpress/2016/03/23/data-preparation-most-time-consuming-least-enjoyable-data-science-task-survey-says/#6a089d126f63)

![](figure/DataPreparation.jpg){width=80%}

> **Most Time-Consuming Data Science Task**
> Question: Do you enjoy data cleaning? 

[Retail Sales Raw Data](https://xiaorui.site/Data-Mining-Business-Analytics/lab/data/RetailSales2018.xlsx)

[Retail Sales Clean Data](https://xiaorui.site/Data-Mining-Business-Analytics/lab/data/RetailSales2018_clean.xlsx)

```{r cols.print=3, rows.print=3}
# install.packages("readxl")
Retail <- readxl::read_xlsx(path = "data/RetailSales2018.xlsx")
head(Retail)
Retail_clean <- readxl::read_xlsx(path = "data/RetailSales2018_clean.xlsx")
Retail_clean
```

```{r echo=FALSE, eval=FALSE, cols.print=3, rows.print=3}
# Store the data in a conveniently named variable
Sales <- Retail_clean$Sales
# Figure 1.2
plot(Sales, type = "l")

# head(Retail_clean)
# Change to Time-Series Object
library(zoo)
Retail_Sales <- ts(Retail_clean$Sales, start = as.yearmon("1992-01"), freq = 12)
head(Retail_Sales)

# install.packages("forecast")
require("forecast")
plot(Retail_Sales)

# Produce the seasonal plot of the last 4 years. We use the function seasonplot from the forecast package
z <- window(Retail_Sales, start=c(2011,1))
seasonplot(z)
```

```{r, eval=FALSE, echo=FALSE}
# Figure 1.3
Sales_adj <- Retail_clean$Sales / Retail_clean$S_Factor
plot(Sales_adj, type = "l")

# Figure 1.5
Sales_MOM <- (Sales_adj-quantmod::Lag(Sales_adj, k=1))/quantmod::Lag(Sales_adj, k=1)
Sales_MOM2 <- ts(Sales_MOM, start = as.yearmon("1992-01"), freq = 12)
Sales_MOM3 <- window(Sales_MOM2, start=c(2001,1))
plot(Sales_MOM3, type = "l")

# Figure 1.6
Sales_YOY <- (Sales_adj-quantmod::Lag(Sales_adj, k=12))/quantmod::Lag(Sales_adj, k=12)
Sales_YOY2 <- ts(Sales_YOY, start = as.yearmon("1992-01"), freq = 12)
Sales_YOY3 <- window(Sales_YOY2, start=c(2001,1))
plot(Sales_YOY3, type = "l")
```


[go to top](#header)